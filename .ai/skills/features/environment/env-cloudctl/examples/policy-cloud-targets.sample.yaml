# policy.env.cloud.targets example (envfile provider with local transport)
#
# This file demonstrates how to configure cloud injection targets in
# docs/project/policy.yaml. The old env/inventory/* format has been removed
# to avoid dual SSOT.
#
# For more examples, see: ../references/inventory-format.md

version: 1
policy:
  env:
    cloud:
      targets:
        - id: staging-envfile
          match:
            env: staging
          set:
            provider: envfile
            runtime: docker-compose
            injection:
              transport: local
              target: /opt/myapp/{env}.env
              post_commands:
                - "cd /opt/myapp && docker compose --env-file /opt/myapp/staging.env up -d"

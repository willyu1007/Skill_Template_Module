# Example: Order Processing Flow
#
# Copy this into `.system/modular/flow_graph.yaml` as a starting point.
# After editing, run:
#   node .ai/scripts/flowctl.js lint
#   node .ai/scripts/flowctl.js graph

flows:
  - id: order_processing
    description: "End-to-end order lifecycle from creation to fulfillment"
    status: experimental

    nodes:
      - id: create_order
        description: "Customer initiates a new order"
        status: active

      - id: validate_order
        description: "System validates order items and pricing"
        status: active

      - id: process_payment
        description: "Process payment for the order"
        status: active

      - id: fulfill_order
        description: "Pick, pack, and ship the order"
        status: planned

      - id: complete_order
        description: "Mark order as delivered/completed"
        status: planned

      - id: cancel_order
        description: "Cancel an order before fulfillment"
        status: active

    edges:
      - from: create_order
        to: validate_order
        description: "Validate after creation"

      - from: validate_order
        to: process_payment
        description: "Payment after validation succeeds"

      - from: validate_order
        to: cancel_order
        description: "Cancel if validation fails"

      - from: process_payment
        to: fulfill_order
        description: "Fulfill after payment succeeds"

      - from: process_payment
        to: cancel_order
        description: "Cancel if payment fails"

      - from: fulfill_order
        to: complete_order
        description: "Complete after delivery"

      - from: create_order
        to: cancel_order
        description: "Customer cancels immediately"

